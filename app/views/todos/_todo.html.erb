<li id="<%= dom_id(todo) %>" 
    class="flex items-center hover:scale-101 justify-between p-3 border rounded-lg w-full transition 
           <%= todo.is_done ? 
                'bg-[#f2f2f2] border-gray-300 text-gray-400' : 
                'bg-gradient-to-r from-[#f57b39] via-[#f78d54] to-[#f5a46e] border-0 text-white shadow-md' %>"
    data-testid="todo-item"
    data-todo-id="<%= todo.id %>">
  <div class="flex items-center gap-2" data-testid="todo-main">
    <!-- Checkbox toggle -->
    <%= form_with url: toggle_todo_path(todo),
              method: :patch,
              data: { turbo_stream: true, testid: "todo-toggle-form-#{todo.id}" } do %>
      <input type="checkbox"
         class="checkbox border-gray-100 checkbox-success"
         <%= "checked='checked'" if todo.is_done %>
         data-testid="todo-checkbox"
         onchange="this.form.requestSubmit()">
    <% end %>

    <!-- Title + due date -->
    <span class="<%= todo.is_done ? 'line-through text-gray-400' : 'text-white font-medium drop-shadow-sm' %>"
          data-testid="todo-title">
      <%= todo.title %>
      <% if todo.due_on.present? %>
        <span class="text-sm text-[#fff6ee] font-light" data-testid="todo-due-date">/ <%= todo.due_on.strftime("%Y-%m-%d") %></span>
      <% end %>
    </span>
  </div>

  <!-- Delete -->
  <%= link_to "❌",
      todo_path(todo),
      data: { turbo_method: :delete },
      class: "text-white hover:text-gray-200 text-lg transition",
      "data-testid": "todo-delete-btn" %>
</li>
